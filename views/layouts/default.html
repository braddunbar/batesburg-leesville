<!doctype html>
<html>
<head>
  <meta charset='utf-8'>
  <title>Batesburg-Leesville</title>

  <meta http-equiv='X-UA-Compatible' content='IE=Edge'>

  <% if (process.env.NODE_ENV === 'production') { %>
    <link rel='stylesheet' href='/css/app.min.css'>
  <% } else { %>
    <link rel='stylesheet' href='/css/bootstrap.css'>
    <link rel='stylesheet' href='/css/bootstrap-responsive.css'>
    <link rel='stylesheet' href='/css/font-awesome.css'>
  <% } %>

</head>
<body>
  <div class='container'>

    <div class='navbar'>
      <div class='navbar-inner'>
        <a class='brand' href='/'>Batesburg-Leesville</a>
        <ul class='nav'>
          <li class='active'><a href='/'>Restaurants</a></li>
          <li><a href='/'>Churches</a></li>
        </ul>
        <ul class='nav pull-right'>
          <% if (this.req.session.email) { %>
            <li><a><%- this.req.session.email %></a></li>
            <li><a href='#' data-signout>Sign Out</a></li>
          <% } else { %>
            <li><a href='#' data-signin>Sign In</a></li>
          <% } %>
        </ul>
      </div>
    </div>

    <%= this.content %>
  </div>

  <script src='https://login.persona.org/include.js'></script>

  <% if (process.env.NODE_ENV === 'production') { %>
    <script src='/js/vendor.min.js'></script>
    <script src='/js/home.min.js'></script>
  <% } else { %>
    <script src='/js/vendor/jquery.js'></script>
    <script src='/js/vendor/underscore.js'></script>
    <script src='/js/vendor/backbone.js'></script>
    <script src='/js/vendor/bootstrap.js'></script>
    <script src='/js/vendor/require.js'></script>
    <script>
      require.config({
        urlArgs: '_=' + (+new Date),
        baseUrl: '/js/'
      });
    </script>
  <% } %>

  <script>
    require(['app'], function(App) {
      var data = <%= this.escapeJs(JSON.stringify({
        email: this.req.session.email || null
      })) %>;
      new App({el: 'body', email: data.email}).render();
    });
  </script>
</body>
</html>
